h1. Email Spec

A collection of RSpec matchers and Cucumber steps to make testing emails go smooth.


h2. Setup

<pre>
<code>
 script/plugin install git://github.com/bmabey/email-spec.git
</code>
</pre>

h3. Cucumber

To use the steps in features put the following in your env.rb:

<pre>
<code>
  # Make sure this require is after you require cucumber/rails/world.
  require 'email_spec_feature_setup'
</code>
</pre>

h3. RSpec
	
The matchers and helpers should be available for your specs by default, but you need to include them into the example groups you want to use them in.  To include them in all of your specs you can do this in your spec_helper.rb:

Spec::Runner.configure do |config|
  config.include(EmailSpec::Helpers)
  config.include(EmailSpec::Matchers)
end

h2. Usage

h3. Cucumber

<pre>
<code>
 Scenario: A new person signs up
      Given I am at "/"
      And a clear email queue
      When I fill in "Email" with "quentin@example.com"
      And I fill in "Password" with "monkey"
      And I fill in "Password confirmation" with "monkey"
      And I press "Sign up"
      Then "quentin@example.com" should receive 1 email
      And "quentin@example.com" should have 1 email
      And "foo@bar.com" should not receive an email
      When I open the email
      Then I should see "confirm" in the email
      And I should see "Account confirmation" in the subject
      When I follow "confirm" in the email
      Then I should see "Confirm your new account"
</code>
</pre>

"Check out an app that implements these features here": http://github.com/bmabey/email-spec-sample-app/tree/master

h2. TODO:
  * refactor!
  * provide custom matchers to give better messages

H3. People

Ben Mabey
Aaron Gibralter
Mischa Fierer

